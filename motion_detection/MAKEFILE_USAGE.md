# Motion Detection Makefile Usage

## New Motion Region Consolidator Test Command

### `make test-consolidator`

This command runs the comprehensive Motion Region Consolidator test suite that generates detailed visualizations of the consolidation process.

**What it does:**
1. ğŸ”¨ **Builds debug version** - Creates optimized debug build with full symbols
2. ğŸ§ª **Runs consolidator tests** - Executes comprehensive visualization test
3. ğŸ“ **Generates visual results** - Creates step-by-step visualization images

**Output location:**
```
build_debug/test_results/motion_region_consolidator/
â”œâ”€â”€ 01_input_images/           # Original test images
â”œâ”€â”€ 02_motion_tracking/        # Tracked objects with trajectories
â”œâ”€â”€ 03_proximity_grouping/     # Objects grouped by spatial proximity
â”œâ”€â”€ 04_motion_grouping/        # Objects grouped by motion similarity
â”œâ”€â”€ 05_consolidated_regions/   # Final consolidated regions
â”œâ”€â”€ 06_expanded_regions/       # Regions expanded for YOLO processing
â””â”€â”€ 07_final_output/          # Complete visualization ready for YOLO11
```

**Test results:**
- **Image 1**: 3 objects â†’ 1 consolidated region
- **Image 2**: 3 objects â†’ 2 consolidated regions  
- **Image 3**: 4 objects â†’ 3 consolidated regions

### Updated Test Commands

- **`make test-working`** - Now includes both processor and consolidator tests (recommended)
- **`make test`** - Runs all tests including the new consolidator test
- **`make test-consolidator`** - Runs only the consolidator test

### Quick Reference

```bash
# Run just the consolidator test
make test-consolidator

# Run all working tests (processor + consolidator)
make test-working

# Run the fastest test (processor only)
make test-quick

# See all available commands
make help
```

### Visual Results

The consolidator test generates 21 visualization images (7 steps Ã— 3 test images) showing:

- **Green boxes**: Original tracked objects with trajectories
- **Colored groups**: Proximity and motion similarity groupings
- **Yellow regions**: Final consolidated regions with velocity vectors
- **Size information**: Dimensions optimized for YOLO11 processing
- **Confidence scores**: Quality metrics for each consolidated region

### Integration Ready

The consolidated regions generated by this test are specifically designed for YOLO11 object detection with:
- Minimum 64x64 pixel dimensions
- 1.3x expansion factor for better detection
- Frame boundary clamping
- Velocity vector information for motion analysis

This test validates that the Motion Region Consolidator correctly groups separate motion areas (like different parts of a bird) into larger regions suitable for object detection pipelines.
